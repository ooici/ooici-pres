<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>OOICI UX Template</title>

<link rel="stylesheet" type="text/css" href="css/ciux-default.css"/>
<link rel="stylesheet" type="text/css" media="screen" href="css/cupertino/jquery-ui-1.8.9.custom.css"/>
<link rel="stylesheet" type="text/css" media="screen" href="css/ciux-datatable-page.css"/>
<link rel="stylesheet" type="text/css" media="screen" href="css/ciux-datatable-table-jui.css"/>

<style type="text/css">
	.hidden {
		display: none;
	}

	#dt_example {
		position: relative;
		overflow: hidden;
	}

	body {
		font-family: Arial, sans-serif;
		font-size: 0.75em;
	}

	.ui-accordion .ui-accordion-content {
		padding: 1em 2.2em;
	}
</style>

<script src="js/jquery-1.4.4.min.js" type="text/javascript"></script>
<script src="js/jquery.layout.min.js" type="text/javascript"></script>
<script src="js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="js/jquery.multi-open-accordion.js" type="text/javascript"></script>

<script type="text/javascript">

	var pgLayout, oTable, xhr;

	function sizeCenterPane() {
		var $Container = $('#layoutContainer');
		var $Pane = $('.ui-layout-center');
		var $Content = $('#dt_example');
		var outerHeight = $Pane.outerHeight();
		// use a Layout utility to calc total height of padding+borders (also handles IE6)
		var panePadding = outerHeight - pgLayout.cssHeight($Pane, outerHeight);
		// update the container height - *just* tall enough to accommodate #Content without scrolling
		$Container.height($Pane.position().top + $Content.outerHeight() + panePadding);
		// resize panes to fit new container size
		pgLayout.resizeAll();
	}

	window.onload = function() {

		if (window.ActiveXObject) {
			xhr = new ActiveXObject("Microsoft.XMLHTTP");
		}
		else if (window.XMLHttpRequest) {
			xhr = new XMLHttpRequest();
		}
		else {
			throw new Error("Ajax is not supported by this browser");
		}

		xhr.onreadystatechange = function() {
			if (this.readyState == 4) {
				if (this.status >= 200 && this.status < 300) {
					alert(this.responseText);
					//					document.getElementById('#example tbody')
					//							.innerHTML = this.responseText;
				}
			}
		};

		////		xhr.send('a=1,b=2,c=3');
		//		xhr.open('GET', '/service/list');
		//		xhr.send('');
	};

	$(document).ready(function() {

		// first set a 'fixed height' on the container so it does not collapse...
		var $Container = $('#layoutContainer')
		$Container.height($(window).height() - $Container.offset().top);

		// NOW create the layout
		pgLayout = $('#layoutContainer').layout({
			resizerClass: 'ui-state-default',
			north__size: 60,
			west__size: 350,
			east__size: 350
		});

		// now resize the container to be a perfect fit
		sizeCenterPane();

		// Datatable settings
		$('#example').dataTable({
			"bProcessing": true,
			"sAjaxSource": 'service/list',
			"aoColumns": [
				/* Id */ {"bVisible": false},
				/* Title */  null,
				/* Provider */  null,
				/* Format */ null,
				/* Type */  null,
				/* MetaInfo */ {"bVisible":false},
				/* Publisher Info */ {"bVisible":false},
				/* Creator Info */ {"bVisible":false}
			],
			"bJQueryUI": true,
			"sPaginationType": "full_numbers"
		});

		// Initialize the center pane datatable
		oTable = $('#example').dataTable();

		/**
		 * WF101
		 *
		 * Handles double click action on a row w/in the center pane's dataResource table.
		 *
		 * The result of this action should hide the dataResource table and display a comprehensive
		 * summary view of the dataResource selected. 
 		 */
		$("#example tbody").bind('dblclick', function(event) {
			// Get the hidden column data for this row
			var rowData = oTable.fnGetData(event.target.parentNode);

			// Hides the data resource table
//			$('.ui-layout-center').hide();

//			$('#container').html(
//				'<a href="http://www.google.com">back to data table</a>',
//				'hi'
//			);

			$('#container').load(
				'/html/fetchDataResourceDetails',
				{title:rowData[1]}
//			    function(response) {
//				    $('container')html(response);
//			    }
			)
		});
 
		/**
		 * WF 100
		 *
		 * Handles user click events within center pane datatable
		 */
		$("#example tbody").click(function(event) {

			// Upon deselect of a row, turns that row's highlighting off
			$(oTable.fnSettings().aoData).each(function () {
				$(this.nTr).removeClass('row_selected');
			});

			// Highlights selected row
			$(event.target.parentNode).addClass('row_selected').text();

			// Expands right pane panels when row is selected. Also closes panels if already expanded.
			$('#eastMultiOpenAccordion h3').trigger('click');

			// Get the hidden column data for this row
			var rowData = oTable.fnGetData(event.target.parentNode);

			// Get the data source Id from column 0
			var dsId = rowData[0];

			// Get dataSource title from the selected row
			var dsTitle = rowData[1];
			// Set dataSource title panel content
			$('a#rp_dsTitle').html(dsTitle);

			// Get dataSource MetaInfo from the selected row
			var dsMeta = rowData[5];
			// Set dataSource MetaInfo panel content
			$('div#rp_dsMetaInfo').html(dsMeta);

			// Get dataSource Publisher Info from the selected row
			var dsPubInfo = rowData[6];
			// Set dataSource Publisher info content
			$('div#rp_publisherInfo').html(dsPubInfo);

			// Get dataSource Creator info from the selected row
			var dsCreatorInfo = rowData[7];
			// Set dataSource Creator info content
			$('div#rp_creatorInfo').html(dsCreatorInfo);

			// Get dataSource Documentation Info from the selected row
			var dsDocInfo = rowData[8];
			// Set dataSource Documentation panel content
			$('div#rp_docInfo').html(dsDocInfo);

			// Get dataSource Variables Info from the selected row
			var dsVarInfo = rowData[9];
			// Set dataSource variables panel content
			$('div#rp_variablesInfo').html(dsVarInfo);

			// Get dataSource Access Info from the selected row
			var dsAccessInfo = rowData[10];
			// Set dataSource access info panel content
			$('div#rp_accessInfo').html(dsAccessInfo);

			// Get dataSource Viewers Info from the selected row
			var dsViewersInfo = rowData[11];
			// Set dataSource viewers info panel content
			$('div#rp_viewersInfo').html(dsViewersInfo);

		});

		$('#eastMultiOpenAccordion').multiAccordion();
		$('#westMultiOpenAccordion').multiAccordion();

		// auto open Resource Selector panel
		$('#westMultiOpenAccordion h3:eq(0)').trigger('click');
		// auto open Geospatial Extent panel
		$('#westMultiOpenAccordion h3:eq(1)').trigger('click');
		// auto open Temporal Extent panel
		$('#westMultiOpenAccordion h3:eq(2)').trigger('click');

		$('.ui-layout-center').hide();
		$('.ui-layout-east').hide();

		$('input#radioAllPubRes').bind('click', function(event) {

			// When a guest clicks the All Published Resources radio button (upper left panel), we could optionally make the Ajax call here but
			// then we'd have to figure out how to get the returned dataResource content into the data table (center pane) from here. Right now
			// I'm just keeping this here just in case we might have to revert to this Ajaxified way of fetching data from the Grails service
			// layer.
//			$.getJSON(
//					'service/list',
//					function(response) {
//					}
//					);

			$('.ui-layout-center').show();
			$('.ui-layout-east').show();
		});

		$('input#radioMySub').bind('click', function(event) {
			$('.ui-layout-center').hide();
			$('.ui-layout-east').hide();
		});

		$('input#radioMyPubRes').bind('click', function(event) {
			$('.ui-layout-center').hide();
			$('.ui-layout-east').hide();
		});

		$('input#radioMyNotif').bind('click', function(event) {
			$('.ui-layout-center').hide();
			$('.ui-layout-east').hide();
		});

		$('input#radioRunEPU').bind('click', function(event) {
			$('.ui-layout-center').hide();
			$('.ui-layout-east').hide();
		});

		$('input#radioRegUsers').bind('click', function(event) {
			$('.ui-layout-center').hide();
			$('.ui-layout-east').hide();
		});

	});

</script>

</head>
<body>

<div id="layoutContainer">

<div class="ui-layout-north hidden"> CI UX Template</div>

<div class="ui-layout-center hidden">
	<div id="dt_example">
		<div id="container">

			<h1>Data Resources</h1>

			<div class="demo_jui">
				<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
					<thead>
					<tr>
						<th>Id</th>
						<th width="50%">Title</th>
						<th>Provider</th>
						<th>Format</th>
						<th>Type</th>
						<th>MetaInfo</th>
						<th>Publisher Info</th>
						<th>Creator Info</th>
					</tr>
					</thead>
					<tbody>
					<td>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam faucibus nisi vitae tortor
						adipiscing sit amet tempus
						justo tincidunt. Nam varius congue ultricies. Phasellus sodales pellentesque congue. Nunc
						posuere sollicitudin
						tortor, quis dapibus risus faucibus sed.
					</td>
					<tr class="gradeA">
						<td>1</td>
						<td>1 Argo Float Data from the PMEL DAPPER Server</td>
						<td>NOAA, NCAR</td>
						<td>NIDS</td>
						<td class="center">GRID</td>
						<td>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam faucibus nisi vitae tortor
							adipiscing sit amet
							tempus justo tincidunt. Nam varius congue ultricies. Phasellus sodales pellentesque congue.
							Nunc posuere
							sollicitudin tortor, quis dapibus risus faucibus sed.
						</td>
						<td>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam faucibus nisi vitae tortor
							adipiscing sit amet
							tempus justo tincidunt. Nam varius congue ultricies. Phasellus sodales pellentesque congue.
							Nunc posuere
							sollicitudin tortor, quis dapibus risus faucibus sed.
						</td>
						<td>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam faucibus nisi vitae tortor
							adipiscing sit amet
							tempus justo tincidunt. Nam varius congue ultricies. Phasellus sodales pellentesque congue.
							Nunc posuere
							sollicitudin tortor, quis dapibus risus faucibus sed.
						</td>
					</tr>
					</tbody>
				</table>
			</div>
			<div class="spacer"></div>
		</div>
	</div>
</div>

<div class="ui-layout-west hidden">
	<div id="westMultiOpenAccordion">
		<h3><a href="#">Resource Selector</a></h3>

		<div style="padding-left: 10px; padding-right: 10px;">
			<form action="">
				<table>
					<tr>
						<td><input id="radioAllPubRes" name="group1" type="radio"/>
						</td>
						<td style="padding-right: 30px;">All Published Resources</td>
						<td><input id="radioMySub" name="group1" type="radio"/></td>
						<td>My Subscriptions</td>
					</tr>
					<tr>
						<td><input id="radioMyPubRes" name="group1" type="radio"/>
						</td>
						<td>My Published Resources</td>
						<td><input id="radioMyNotif" name="group1" type="radio"/>
						</td>
						<td>My Notifications</td>
					</tr>
					<tr>
						<td><input id="radioRunEPU" name="group1" type="radio"/>
						</td>
						<td>Running EPUs</td>
						<td><input id="radioRegUsers" name="group1" type="radio"/>
						</td>
						<td>Registered Users</td>
					</tr>
				</table>
			</form>
		</div>
		<h3><a href="#">Geospatial Extent</a></h3>

		<div id="geospatialContainer">
			<div class="boundingBoxRadios">
				<form action="">
					<table>
						<tr>
							<td><strong>Bounding Box:</strong></td>
							<td><input name="group1" type="radio"/></td>
							<td>All</td>
						</tr>
						<tr>
							<td></td>
							<td><input name="group1" type="radio"/></td>
							<td>Defined</td>
						</tr>
					</table>
				</form>
			</div>
			<div class="altitudeRadios">
				<form action="">
					<table>
						<tr>
							<td><strong>Altitude:</strong></td>
							<td><input name="group1" type="radio"/></td>
							<td>All</td>
						</tr>
						<tr>
							<td></td>
							<td><input name="group1" type="radio"/></td>
							<td>Defined</td>
						</tr>
					</table>
				</form>
			</div>
			<div class="boundingBoxText">
				Bounding Box<br/>
				(Decimal Degrees)
			</div>
			<div class="boundingBoxControls">
				<span class="Ntext">N</span>
				<input class="north textfield" name="north" type="text" size="5" maxlength="5"/>
				<span class="Stext">S</span>
				<input class="south textfield" name="south" type="text" size="5" maxlength="5"/>
				<span class="Etext">E</span>
				<input class="east textfield" name="east" type="text" size="5" maxlength="5"/>
				<span class="Wtext">W</span>
				<input class="west textfield" name="west" type="text" size="5" maxlength="5"/>
				<span class="NSEWBackgroundBorder"></span>
			</div>
			<div class="altitudeControls">
					<span class="altText">Altitude<br/>
					(Feet MSL)</span>
					<span class="altitudeUpper">Upper Bound:
					<input class="textfield" name="altUpper" type="text" size="5" maxlength="5"/>
					</span>
					<span class="altitudeLower">Lower Bound:
					<input class="textfield" name="altLower" type="text" size="5" maxlength="5"/>
					</span>
			</div>
		</div>
		<h3><a href="#">Temporal Extent</a></h3>

		<div style="display: block; padding-left: 10px; padding-right: 10px;" class="temporalExtentContainer">
			<form action="">
				<table>
					<tr>
						<td class="boldText">Time Range:</td>
						<td><input id="TE_timeRange_all" name="group1" type="radio"/>
						</td>
						<td>All</td>
						<td><input id="TE_timeRange_defined" name="group1" type="radio"/></td>
						<td>Defined</td>
					</tr>
				</table>
			</form>
			<span class="te-from boldText">From:</span>
			<input class="te_from_input" name="te_from_input" type="text" size="15" maxlength="15"/>
			<span class="te-to boldText">To:</span>
			<input class="te_to_input" name="te_to_input" type="text" size="15" maxlength="15"/>

			<div class="te-footer-text">
				ISO Formatted Time: YYYY-MM-DDTHH:MM:SSZ<br/>
				Example: 2010-11-15T09:00:00
			</div>
		</div>
	</div>
</div>

<div class="ui-layout-east hidden">
	<div id="eastMultiOpenAccordion">
		<h3><a id="rp_dsTitle" href="#">Data Source Title</a></h3>

		<div id="rp_dsMetaInfo">
		</div>
		<h3><a href="#">Publisher Information</a></h3>

		<div id="rp_publisherInfo">
		</div>
		<h3><a href="#">Creator Information</a></h3>

		<div id="rp_creatorInfo">
		</div>
		<h3><a href="#">Documentation</a></h3>

		<div id="rp_docInfo">
		</div>
		<h3><a href="#">Variables</a></h3>

		<div id="rp_variablesInfo">
		</div>
		<h3><a href="#">Access</a></h3>

		<div id="rp_accessInfo">
		</div>
		<h3><a href="#">Viewers</a></h3>

		<div id="rp_viewersInfo">
		</div>
	</div>
</div>

</div>

</body>

</html>
